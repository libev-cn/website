<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">

    <title>Libev 中文手册 | 下载安装 </title>
    <meta name="description" content="使用C语言编写的高性能事件驱动库 | Libevent | Libuv | 高并发 | 高性能 | 跨平台">
    <meta name="keywords" content="Libev,Libevent,Libuv,高性能,高并发,轻量级,跨平台">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    

    <!-- fonts -->
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Ubuntu:300,400,500,600,700" rel="stylesheet">

    <!-- stylesheets -->
    <link rel="stylesheet" href="/style/doc.css">

    <!-- favicon -->
    <link rel="icon" href="/images/favicon.ico">

    

  </head>
  <body>

   <script>window.__INITIAL_STATE__ = {"page":{"title":"下载安装","path":"base/install.html"},"data":{"navigation":{"logo":{"text":"Libev 中文手册","type":"link","path":"/"},"main":[{"text":"一、介绍","type":"label"},{"text":"下载安装","type":"link","path":"base/install.html"},{"text":"使用示例","type":"link","path":"base/used.html"},{"text":"二、入门","type":"label"},{"text":"ev_loop","type":"link","path":"api/loop.html"},{"text":"ev_io","type":"link","path":"api/io.html"},{"text":"ev_timer","type":"link","path":"api/timer.html"},{"text":"ev_signal","type":"link","path":"api/signal.html"},{"text":"ev_child","type":"link","path":"api/child.html"},{"text":"ev_idle","type":"link","path":"api/idle.html"},{"text":"ev_stat","type":"link","path":"api/stat.html"},{"text":"三、其它","type":"label"},{"text":"内存检查","type":"link","path":"other/memcheck.html"},{"text":"算法复杂度","type":"link","path":"other/algorithm.html"},{"text":"编译警告","type":"link","path":"other/compiler.html"},{"text":"线程安全","type":"link","path":"other/threads.html"},{"text":"内置的宏","type":"link","path":"other/micro.html"}]}},"config":{"timezone":"UTC","root":"/","time_format":"HH:mm:ss","theme":"../node_modules/hexo-theme-doc","theme_config":{"swagger_ui":{"version":2,"permalinks":true,"api_explorer":true,"download":"Download specification","show_extensions":false,"deep_linking":true,"display_operation_id":false,"doc_expansion":"none"},"search":{"skip":false,"background":false,"route":"/lunr.json"},"favicon":"images/favicon.ico"}}}</script>

    <div id="react-navigation-root"><div class="doc-navigation" data-reactroot><nav class="doc-navbar"><a href="/" class="doc-navbar__logo"><img src="/images/logo.png" class="doc-navbar__logo__img"><span class="doc-navbar__logo__text">Libev 中文手册</span></a><i class="dc-icon dc-icon--close dc-icon--interactive doc-sidebar-close doc-navbar__sidebar-close doc-navbar__sidebar-close--desktop"></i><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-navbar__sidebar-toggle"></i></nav><nav class="doc-sidebar"><div class="doc-sidebar__vertical-menu"><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-sidebar-toggle--primary doc-sidebar__vertical-menu__item"></i><i class="dc-icon dc-icon--search dc-icon--interactive doc-sidebar__vertical-menu__item doc-sidebar__vertical-menu__item--primary"></i></div><div class="doc-sidebar-content"><div class="doc-sidebar__search-form"></div><ul class="doc-sidebar-list"></ul></div></nav></div></div>
    <div class="doc-content">
  <div class="dc-page">
    <div class="dc-card">
      <div id="react-search-results-root"></div>
      <div id="page-content" class="doc-formatting">
        <h2 id="版本简述"><a href="#版本简述" class="headerlink" title="版本简述"></a>版本简述</h2><ul>
<li><p><code>4.29</code>之后增加了<code>io_uring</code>支持.</p>
</li>
<li><p><code>4.26-4.28</code>期间增加与完善<code>Linux AIO</code>支持.</p>
</li>
<li><p><code>4.25</code>之后增加了<code>Android</code>的兼容性支持.</p>
</li>
<li><p><code>4.00</code>之后<code>Linux</code>支持<code>signalfd</code>、<code>eventfd</code>、<code>timerfd</code></p>
</li>
</ul>
<h2 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h2>  <!-- 一般情况下, `Libev`的源码打包后的文件命名规则是以`libev-${version}.tar.gz`形式出现. -->
<p>  我们一般根据版本号来确定当前使用的<code>libev</code>版本, 打包后的文件命名规则是以<code>libev-${version}.tar.gz</code>形式出现.</p>
<blockquote>
<p>注意:<br>    不建议大家激进的跟进新版本, 最新的版本也不一定就是最好的.</p>
</blockquote>
<h2 id="在线阅读"><a href="#在线阅读" class="headerlink" title="在线阅读"></a>在线阅读</h2><p>  可以从译者在<a href="https://github.com/CandyMi/libev" target="_blank" rel="noopener">这里</a>提供的<code>fork</code>源在线阅读.</p>
<h2 id="下载源码"><a href="#下载源码" class="headerlink" title="下载源码"></a>下载源码</h2><p>  推荐大家从<strong>Libev作者</strong>本人提供的<a href="http://dist.schmorp.de/libev/Attic/" target="_blank" rel="noopener">服务器</a>下载源码包, 这样下载的安全性也是有保障的.</p>
<blockquote>
<p>注意:<br>    鉴于国际网络互通的一些问题导致有些同学可能无法访问. 所以本站已缓存<code>2015</code>年以来的稳定版打包文件, 如有需要可以直接点击链接进行下载:</p>
</blockquote>
<ul>
<li><p><a href="../downloads/libev-4.33.tar.gz">libev-4.33.tar.gz<svg t="1647698502787" class="icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1245" width="20" height="20"><path d="M511.656169 81.518618c-245.792009 0-428.544263 201.248514-428.544263 436.469769 0 20.75265 4.564969 82.371032 11.870352 99.737562l5.694699 21.7647c1.760087 10.998495 10.970866 19.589151 22.570042 19.589151 10.215666 0 20.557198-8.247848 21.962198-17.540492l0.563842-5.091972-2.761903-15.899108c-3.853771-16.928554-12.226462-80.751139-12.226462-102.558817 0-209.074759 162.734338-392.476813 380.870474-389.153114 210.618928 3.198855 381.411803 169.518858 381.411803 378.593618 0 209.05634-170.793898 378.574175-381.411803 378.574175-75.057463 0-144.879692-21.828145-203.898877-59.005882-0.106424 0.074701-0.2415 0.163729-0.350994 0.2415-10.188037-5.068436-23.5166-3.589758-33.249265 4.641717-25.316595 23.528879-50.386574 37.867446-71.118757 46.620807 5.740748-39.59581 7.02909-89.065502 5.086855-109.450784 0-3.743254-0.713244-7.600095-2.471284-11.32186-5.738701-12.325723-19.261693-18.232247-30.191626-13.211906-5.275143 2.40477-8.918114 6.919597-10.719132 12.292977l-1.213641 7.652284c0 1.892093 0.167822 3.78521 0.607844 5.708002 1.780553 21.035082 6.762007 77.193103-17.188474 126.655631-1.696642 3.983731-2.463098 8.204869-2.424212 12.370749-0.024559 0.130983-0.065492 0.257873-0.086981 0.391926-2.219551 13.025665 7.118118 25.446555 20.872377 27.746948 0.951675 0.157589 1.893116 0.242524 2.827395 0.288572 3.37998 0.303922 6.740518-0.151449 9.893324-1.309832 27.868721-5.812379 91.071182-33.57877 124.253932-57.370639 61.930491 34.542724 133.278469 54.386678 209.374588 54.386678 236.997716 0 429.086615-190.68697 429.084569-425.90311C940.740738 272.196379 748.652861 81.518618 511.656169 81.518618z" p-id="1246" fill="#d81e06"/><path d="M226.169089 426.224428 226.169089 595.07609l36.719296 0 0-99.638301c0-6.085602 0.927115-11.836583 2.902096-17.320481 1.912559-5.418406 4.618181-10.168594 8.043187-14.178931 3.430122-4.010337 7.652284-7.224542 12.596899-9.495258 4.943592-2.276856 10.54824-3.413749 16.745383-3.413749 10.945283 0 18.989493 3.010567 24.128537 8.965186 5.140067 6.014994 7.91118 15.647375 8.375761 28.888957L335.680249 595.07609l36.719296 0L372.399545 479.117079c0-19.190061-5.206582-33.565467-15.754822-43.13338-10.547217-9.56075-24.923646-14.377452-43.183522-14.377452-10.945283 0-20.901029 2.672876-29.934776 8.025791-9.032724 5.352915-16.286941 12.704346-21.890566 22.065552l-0.660032-0.669242 0-24.804942L226.169089 426.223405z" p-id="1247" fill="#d81e06"/><path d="M559.64923 483.668745c-3.097548-11.904121-8.106632-22.403243-14.969946-31.56695-6.856152-9.16166-15.493879-16.515139-25.910113-22.065552-10.41521-5.616928-22.152533-8.363482-35.270295-8.363482-12.459776 0-23.600511 2.342348-33.491789 7.15905-9.894348 4.745071-18.328437 11.233855-25.254174 19.392676-6.989181 8.157797-12.329816 17.654079-16.08842 28.41926-3.75758 10.836813-5.603625 22.203698-5.603625 34.174334 0 13.039991 1.714038 25.009603 5.278213 35.913954 3.490497 10.896164 8.766664 20.193925 15.752776 28.085662 6.994298 7.888667 15.498996 13.972223 25.584702 18.321274 10.083659 4.348028 21.688975 6.556323 34.81083 6.556323 8.965186 0 17.667382-1.269923 25.91216-3.745301 8.239662-2.538823 15.754822-6.218632 22.414499-11.168364 6.595208-4.882194 12.328793-10.901281 17.012466-18.122753 4.748141-7.157004 8.106632-15.315824 10.020214-24.479531l-34.80776 0c-3.234671 9.363252-8.114818 16.388249-14.638395 21.067828-6.528694 4.682649-15.165398 7.019881-25.91216 7.019881-7.714705 0-14.374382-1.337461-19.97903-4.076852-5.603625-2.740414-10.151197-6.418176-13.843286-10.969842-3.692089-4.546549-6.398734-9.897418-8.244778-15.97995-1.768273-6.0416-2.666736-12.285814-2.679016-18.790972l122.346489 0C563.537793 507.806491 562.748824 495.505327 559.64923 483.668745zM439.72286 495.770364c0.195451-6.287193 1.449002-12.169157 3.690042-17.654079 2.240017-5.418406 5.273097-10.168594 9.03477-14.178931 3.75758-4.010337 8.30413-7.224542 13.509688-9.495258 5.212722-2.276856 11.076266-3.413749 17.540492-3.413749 6.197142 0 11.867282 1.269923 16.946974 3.745301 5.01113 2.540869 9.296737 5.821589 12.850679 9.830903 3.562129 4.016477 6.333242 8.760524 8.375761 14.179954 2.042519 5.483898 3.295046 11.100826 3.692089 16.984836L439.72286 495.76934z" p-id="1248" fill="#d81e06"/><path d="M695.730535 469.688335 696.390567 469.688335 727.311811 595.143629 765.027807 595.143629 817.181631 426.224428 779.796162 426.224428 745.972822 552.345893 745.313813 552.345893 715.38006 426.224428 678.328189 426.224428 647.075395 552.345893 646.415362 552.345893 613.910041 426.224428 574.945611 426.224428 626.505917 595.143629 665.137773 595.143629Z" p-id="1249" fill="#d81e06"/></svg></a></p>
</li>
<li><p><a href="../downloads/libev-4.27.tar.gz">libev-4.27.tar.gz</a></p>
</li>
<li><p><a href="../downloads/libev-4.25.tar.gz">libev-4.25.tar.gz</a></p>
</li>
<li><p><a href="../downloads/libev-4.24.tar.gz">libev-4.24.tar.gz</a></p>
</li>
<li><p><a href="../downloads/libev-4.23.tar.gz">libev-4.23.tar.gz</a></p>
</li>
<li><p><a href="../downloads/libev-4.22.tar.gz">libev-4.22.tar.gz</a></p>
</li>
<li><p><a href="../downloads/libev-4.20.tar.gz">libev-4.20.tar.gz</a></p>
</li>
<li><p><a href="../downloads/libev-4.19.tar.gz">libev-4.19.tar.gz</a></p>
</li>
<li><p><a href="../downloads/libev-4.18.tar.gz">libev-4.18.tar.gz</a></p>
</li>
</ul>
<h2 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h2><h3 id="1-下载源码包"><a href="#1-下载源码包" class="headerlink" title="1. 下载源码包"></a>1. 下载源码包</h3><p>  为了保证下载速度, 我们选择上述链接中的<code>4.33</code>版本下载到本地:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp18k2vy63cz9njzffe8Z:~/build<span class="comment"># wget https://libev.cn/downloads/libev-4.33.tar.gz</span></span><br><span class="line">--2022-03-14 21:49:43--  https://libev.cn/downloads/libev-4.33.tar.gz</span><br><span class="line">Resolving libev.cn (libev.cn)... 185.199.108.153, 185.199.110.153, 185.199.109.153, ...</span><br><span class="line">Connecting to libev.cn (libev.cn)|185.199.108.153|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 569527 (556K) [application/gzip]</span><br><span class="line">Saving to: ‘libev-4.33.tar.gz’</span><br><span class="line"></span><br><span class="line">libev-4.33.tar.gz        100%[======================&gt;] 556.18K  36.8KB/s    <span class="keyword">in</span> 18s</span><br><span class="line"></span><br><span class="line">2022-03-14 21:50:03 (31.1 KB/s) - ‘libev-4.33.tar.gz’ saved [569527/569527]</span><br><span class="line"></span><br><span class="line">root@iZbp18k2vy63cz9njzffe8Z:~/build<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<h3 id="2-安装依赖"><a href="#2-安装依赖" class="headerlink" title="2. 安装依赖"></a>2. 安装依赖</h3><p>  为了运行<code>configure</code>, 需要安装以下工具:</p>
<ul>
<li><p><code>autoconf</code></p>
</li>
<li><p><code>automake</code></p>
</li>
<li><p><code>libtool</code></p>
</li>
<li><p><code>make</code></p>
</li>
<li><p><code>gcc/clang</code></p>
</li>
</ul>
<h3 id="3-开始编译"><a href="#3-开始编译" class="headerlink" title="3. 开始编译"></a>3. 开始编译</h3><ul>
<li>运行<code>sh autogen.sh</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp18k2vy63cz9njzffe8Z:~/build/libev-4.33<span class="comment"># sh autogen.sh</span></span><br><span class="line">libtoolize: putting auxiliary files <span class="keyword">in</span> <span class="string">'.'</span>.</span><br><span class="line">libtoolize: linking file <span class="string">'./ltmain.sh'</span></span><br><span class="line">libtoolize: Consider adding <span class="string">'AC_CONFIG_MACRO_DIRS([m4])'</span> to configure.ac,</span><br><span class="line">libtoolize: and rerunning libtoolize and aclocal.</span><br><span class="line">libtoolize: Consider adding <span class="string">'-I m4'</span> to ACLOCAL_AMFLAGS <span class="keyword">in</span> Makefile.am.</span><br><span class="line">configure.ac:12: installing <span class="string">'./compile'</span></span><br><span class="line">configure.ac:7: installing <span class="string">'./missing'</span></span><br><span class="line">Makefile.am: installing <span class="string">'./depcomp'</span></span><br><span class="line">root@iZbp18k2vy63cz9njzffe8Z:~/build/libev-4.33<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<ul>
<li>运行<code>./configure</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp18k2vy63cz9njzffe8Z:~/build/libev-4.33<span class="comment"># ./configure</span></span><br><span class="line">checking <span class="keyword">for</span> a BSD-compatible install... /usr/bin/install -c</span><br><span class="line">checking whether build environment is sane... yes</span><br><span class="line">checking <span class="keyword">for</span> a thread-safe mkdir -p... /usr/bin/mkdir -p</span><br><span class="line">checking <span class="keyword">for</span> gawk... no</span><br><span class="line">checking <span class="keyword">for</span> mawk... mawk</span><br><span class="line">checking whether make sets $(MAKE)... yes</span><br><span class="line">checking whether make supports nested variables... yes</span><br><span class="line">checking whether to <span class="built_in">enable</span> maintainer-specific portions of Makefiles... no</span><br><span class="line">checking <span class="keyword">for</span> gcc... gcc</span><br><span class="line">checking whether the C compiler works... yes</span><br><span class="line">checking <span class="keyword">for</span> C compiler default output file name... a.out</span><br><span class="line">checking <span class="keyword">for</span> suffix of executables...</span><br><span class="line">checking whether we are cross compiling... no</span><br><span class="line">checking <span class="keyword">for</span> suffix of object files... o</span><br><span class="line">checking whether we are using the GNU C compiler... yes</span><br><span class="line">checking whether gcc accepts -g... yes</span><br><span class="line">checking <span class="keyword">for</span> gcc option to accept ISO C89... none needed</span><br><span class="line">checking whether gcc understands -c and -o together... yes</span><br><span class="line">checking whether make supports the include directive... yes (GNU style)</span><br><span class="line">checking dependency style of gcc... gcc3</span><br><span class="line">checking build system <span class="built_in">type</span>... x86_64-pc-linux-gnu</span><br><span class="line">checking host system <span class="built_in">type</span>... x86_64-pc-linux-gnu</span><br><span class="line">checking how to <span class="built_in">print</span> strings... <span class="built_in">printf</span></span><br><span class="line">checking <span class="keyword">for</span> a sed that does not truncate output... /usr/bin/sed</span><br><span class="line">checking <span class="keyword">for</span> grep that handles long lines and -e... /usr/bin/grep</span><br><span class="line">checking <span class="keyword">for</span> egrep... /usr/bin/grep -E</span><br><span class="line">checking <span class="keyword">for</span> fgrep... /usr/bin/grep -F</span><br><span class="line">checking <span class="keyword">for</span> ld used by gcc... /usr/bin/ld</span><br><span class="line">checking <span class="keyword">if</span> the linker (/usr/bin/ld) is GNU ld... yes</span><br><span class="line">checking <span class="keyword">for</span> BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B</span><br><span class="line">checking the name lister (/usr/bin/nm -B) interface... BSD nm</span><br><span class="line">checking whether ln -s works... yes</span><br><span class="line">checking the maximum length of <span class="built_in">command</span> line arguments... 1572864</span><br><span class="line">checking how to convert x86_64-pc-linux-gnu file names to x86_64-pc-linux-gnu format... func_convert_file_noop</span><br><span class="line">checking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop</span><br><span class="line">checking <span class="keyword">for</span> /usr/bin/ld option to reload object files... -r</span><br><span class="line">checking <span class="keyword">for</span> objdump... objdump</span><br><span class="line">checking how to recognize dependent libraries... pass_all</span><br><span class="line">checking <span class="keyword">for</span> dlltool... no</span><br><span class="line">checking how to associate runtime and link libraries... <span class="built_in">printf</span> %s\n</span><br><span class="line">checking <span class="keyword">for</span> ar... ar</span><br><span class="line">checking <span class="keyword">for</span> archiver @FILE support... @</span><br><span class="line">checking <span class="keyword">for</span> strip... strip</span><br><span class="line">checking <span class="keyword">for</span> ranlib... ranlib</span><br><span class="line">checking <span class="built_in">command</span> to parse /usr/bin/nm -B output from gcc object... ok</span><br><span class="line">checking <span class="keyword">for</span> sysroot... no</span><br><span class="line">checking <span class="keyword">for</span> a working dd... /usr/bin/dd</span><br><span class="line">checking how to truncate binary pipes... /usr/bin/dd bs=4096 count=1</span><br><span class="line">checking <span class="keyword">for</span> mt... mt</span><br><span class="line">checking <span class="keyword">if</span> mt is a manifest tool... no</span><br><span class="line">checking how to run the C preprocessor... gcc -E</span><br><span class="line">checking <span class="keyword">for</span> ANSI C header files... yes</span><br><span class="line">checking <span class="keyword">for</span> sys/types.h... yes</span><br><span class="line">checking <span class="keyword">for</span> sys/stat.h... yes</span><br><span class="line">checking <span class="keyword">for</span> stdlib.h... yes</span><br><span class="line">checking <span class="keyword">for</span> string.h... yes</span><br><span class="line">checking <span class="keyword">for</span> memory.h... yes</span><br><span class="line">checking <span class="keyword">for</span> strings.h... yes</span><br><span class="line">checking <span class="keyword">for</span> inttypes.h... yes</span><br><span class="line">checking <span class="keyword">for</span> stdint.h... yes</span><br><span class="line">checking <span class="keyword">for</span> unistd.h... yes</span><br><span class="line">checking <span class="keyword">for</span> dlfcn.h... yes</span><br><span class="line">checking <span class="keyword">for</span> objdir... .libs</span><br><span class="line">checking <span class="keyword">if</span> gcc supports -fno-rtti -fno-exceptions... no</span><br><span class="line">checking <span class="keyword">for</span> gcc option to produce PIC... -fPIC -DPIC</span><br><span class="line">checking <span class="keyword">if</span> gcc PIC flag -fPIC -DPIC works... yes</span><br><span class="line">checking <span class="keyword">if</span> gcc static flag -static works... yes</span><br><span class="line">checking <span class="keyword">if</span> gcc supports -c -o file.o... yes</span><br><span class="line">checking <span class="keyword">if</span> gcc supports -c -o file.o... (cached) yes</span><br><span class="line">checking whether the gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes</span><br><span class="line">checking whether -lc should be explicitly linked <span class="keyword">in</span>... no</span><br><span class="line">checking dynamic linker characteristics... GNU/Linux ld.so</span><br><span class="line">checking how to hardcode library paths into programs... immediate</span><br><span class="line">checking whether stripping libraries is possible... yes</span><br><span class="line">checking <span class="keyword">if</span> libtool supports shared libraries... yes</span><br><span class="line">checking whether to build shared libraries... yes</span><br><span class="line">checking whether to build static libraries... yes</span><br><span class="line">checking sys/inotify.h usability... yes</span><br><span class="line">checking sys/inotify.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> sys/inotify.h... yes</span><br><span class="line">checking sys/epoll.h usability... yes</span><br><span class="line">checking sys/epoll.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> sys/epoll.h... yes</span><br><span class="line">checking sys/event.h usability... no</span><br><span class="line">checking sys/event.h presence... no</span><br><span class="line">checking <span class="keyword">for</span> sys/event.h... no</span><br><span class="line">checking port.h usability... no</span><br><span class="line">checking port.h presence... no</span><br><span class="line">checking <span class="keyword">for</span> port.h... no</span><br><span class="line">checking poll.h usability... yes</span><br><span class="line">checking poll.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> poll.h... yes</span><br><span class="line">checking sys/timerfd.h usability... yes</span><br><span class="line">checking sys/timerfd.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> sys/timerfd.h... yes</span><br><span class="line">checking sys/select.h usability... yes</span><br><span class="line">checking sys/select.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> sys/select.h... yes</span><br><span class="line">checking sys/eventfd.h usability... yes</span><br><span class="line">checking sys/eventfd.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> sys/eventfd.h... yes</span><br><span class="line">checking sys/signalfd.h usability... yes</span><br><span class="line">checking sys/signalfd.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> sys/signalfd.h... yes</span><br><span class="line">checking linux/aio_abi.h usability... yes</span><br><span class="line">checking linux/aio_abi.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> linux/aio_abi.h... yes</span><br><span class="line">checking linux/fs.h usability... yes</span><br><span class="line">checking linux/fs.h presence... yes</span><br><span class="line">checking <span class="keyword">for</span> linux/fs.h... yes</span><br><span class="line">checking <span class="keyword">for</span> inotify_init... yes</span><br><span class="line">checking <span class="keyword">for</span> epoll_ctl... yes</span><br><span class="line">checking <span class="keyword">for</span> kqueue... no</span><br><span class="line">checking <span class="keyword">for</span> port_create... no</span><br><span class="line">checking <span class="keyword">for</span> poll... yes</span><br><span class="line">checking <span class="keyword">for</span> select... yes</span><br><span class="line">checking <span class="keyword">for</span> eventfd... yes</span><br><span class="line">checking <span class="keyword">for</span> signalfd... yes</span><br><span class="line">checking <span class="keyword">for</span> clock_gettime... yes</span><br><span class="line">checking <span class="keyword">for</span> nanosleep... yes</span><br><span class="line">checking <span class="keyword">for</span> __kernel_rwf_t... yes</span><br><span class="line">checking <span class="keyword">for</span> library containing floor... -lm</span><br><span class="line">checking that generated files are newer than configure... <span class="keyword">done</span></span><br><span class="line">configure: creating ./config.status</span><br><span class="line">config.status: creating Makefile</span><br><span class="line">config.status: creating config.h</span><br><span class="line">config.status: executing depfiles commands</span><br><span class="line">config.status: executing libtool commands</span><br><span class="line">root@iZbp18k2vy63cz9njzffe8Z:~/build/libev-4.33<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<ul>
<li>运行<code>make &amp;&amp; make install</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp18k2vy63cz9njzffe8Z:~/build/libev-4.33<span class="comment"># make &amp;&amp; make install</span></span><br><span class="line">make  all-am</span><br><span class="line">make[1]: Entering directory <span class="string">'/root/build/libev-4.33'</span></span><br><span class="line">/bin/bash ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.     -g -O3 -MT ev.lo -MD -MP -MF .deps/ev.Tpo -c -o ev.lo ev.c</span><br><span class="line">libtool: compile:  gcc -DHAVE_CONFIG_H -I. -g -O3 -MT ev.lo -MD -MP -MF .deps/ev.Tpo -c ev.c  -fPIC -DPIC -o .libs/ev.o</span><br><span class="line">ev.c:2143:31: warning: ‘ev_default_loop_ptr’ initialized and declared ‘extern’</span><br><span class="line">   EV_API_DECL struct ev_loop *ev_default_loop_ptr = 0; /* needs to be initialised to make it a definition despite extern */</span><br><span class="line">                               ^~~~~~~~~~~~~~~~~~~</span><br><span class="line">libtool: compile:  gcc -DHAVE_CONFIG_H -I. -g -O3 -MT ev.lo -MD -MP -MF .deps/ev.Tpo -c ev.c -o ev.o &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">mv -f .deps/ev.Tpo .deps/ev.Plo</span><br><span class="line">/bin/bash ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.     -g -O3 -MT event.lo -MD -MP -MF .deps/event.Tpo -c -o event.lo event.c</span><br><span class="line">libtool: compile:  gcc -DHAVE_CONFIG_H -I. -g -O3 -MT event.lo -MD -MP -MF .deps/event.Tpo -c event.c  -fPIC -DPIC -o .libs/event.o</span><br><span class="line">libtool: compile:  gcc -DHAVE_CONFIG_H -I. -g -O3 -MT event.lo -MD -MP -MF .deps/event.Tpo -c event.c -o event.o &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">mv -f .deps/event.Tpo .deps/event.Plo</span><br><span class="line">/bin/bash ./libtool  --tag=CC   --mode=link gcc  -g -O3 -version-info 4:0:0  -o libev.la -rpath /usr/<span class="built_in">local</span>/lib ev.lo event.lo  -lm</span><br><span class="line">libtool: link: gcc -shared  -fPIC -DPIC  .libs/ev.o .libs/event.o   -lm  -g -O3   -Wl,-soname -Wl,libev.so.4 -o .libs/libev.so.4.0.0</span><br><span class="line">libtool: link: (<span class="built_in">cd</span> <span class="string">".libs"</span> &amp;&amp; rm -f <span class="string">"libev.so.4"</span> &amp;&amp; ln -s <span class="string">"libev.so.4.0.0"</span> <span class="string">"libev.so.4"</span>)</span><br><span class="line">libtool: link: (<span class="built_in">cd</span> <span class="string">".libs"</span> &amp;&amp; rm -f <span class="string">"libev.so"</span> &amp;&amp; ln -s <span class="string">"libev.so.4.0.0"</span> <span class="string">"libev.so"</span>)</span><br><span class="line">libtool: link: ar cru .libs/libev.a  ev.o event.o</span><br><span class="line">ar: <span class="string">'u'</span> modifier ignored since <span class="string">'D'</span> is the default (see <span class="string">'U'</span>)</span><br><span class="line">libtool: link: ranlib .libs/libev.a</span><br><span class="line">libtool: link: ( <span class="built_in">cd</span> <span class="string">".libs"</span> &amp;&amp; rm -f <span class="string">"libev.la"</span> &amp;&amp; ln -s <span class="string">"../libev.la"</span> <span class="string">"libev.la"</span> )</span><br><span class="line">make[1]: Leaving directory <span class="string">'/root/build/libev-4.33'</span></span><br><span class="line">make[1]: Entering directory <span class="string">'/root/build/libev-4.33'</span></span><br><span class="line"> /usr/bin/mkdir -p <span class="string">'/usr/local/lib'</span></span><br><span class="line"> /bin/bash ./libtool   --mode=install /usr/bin/install -c   libev.la <span class="string">'/usr/local/lib'</span></span><br><span class="line">libtool: install: /usr/bin/install -c .libs/libev.so.4.0.0 /usr/<span class="built_in">local</span>/lib/libev.so.4.0.0</span><br><span class="line">libtool: install: (<span class="built_in">cd</span> /usr/<span class="built_in">local</span>/lib &amp;&amp; &#123; ln -s -f libev.so.4.0.0 libev.so.4 || &#123; rm -f libev.so.4 &amp;&amp; ln -s libev.so.4.0.0 libev.so.4; &#125;; &#125;)</span><br><span class="line">libtool: install: (<span class="built_in">cd</span> /usr/<span class="built_in">local</span>/lib &amp;&amp; &#123; ln -s -f libev.so.4.0.0 libev.so || &#123; rm -f libev.so &amp;&amp; ln -s libev.so.4.0.0 libev.so; &#125;; &#125;)</span><br><span class="line">libtool: install: /usr/bin/install -c .libs/libev.lai /usr/<span class="built_in">local</span>/lib/libev.la</span><br><span class="line">libtool: install: /usr/bin/install -c .libs/libev.a /usr/<span class="built_in">local</span>/lib/libev.a</span><br><span class="line">libtool: install: chmod 644 /usr/<span class="built_in">local</span>/lib/libev.a</span><br><span class="line">libtool: install: ranlib /usr/<span class="built_in">local</span>/lib/libev.a</span><br><span class="line">libtool: finish: PATH=<span class="string">"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/sbin"</span> ldconfig -n /usr/<span class="built_in">local</span>/lib</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">Libraries have been installed <span class="keyword">in</span>:</span><br><span class="line">   /usr/<span class="built_in">local</span>/lib</span><br><span class="line"></span><br><span class="line">If you ever happen to want to link against installed libraries</span><br><span class="line"><span class="keyword">in</span> a given directory, LIBDIR, you must either use libtool, and</span><br><span class="line">specify the full pathname of the library, or use the <span class="string">'-LLIBDIR'</span></span><br><span class="line">flag during linking and <span class="keyword">do</span> at least one of the following:</span><br><span class="line">   - add LIBDIR to the <span class="string">'LD_LIBRARY_PATH'</span> environment variable</span><br><span class="line">     during execution</span><br><span class="line">   - add LIBDIR to the <span class="string">'LD_RUN_PATH'</span> environment variable</span><br><span class="line">     during linking</span><br><span class="line">   - use the <span class="string">'-Wl,-rpath -Wl,LIBDIR'</span> linker flag</span><br><span class="line">   - have your system administrator add LIBDIR to <span class="string">'/etc/ld.so.conf'</span></span><br><span class="line"></span><br><span class="line">See any operating system documentation about shared libraries <span class="keyword">for</span></span><br><span class="line">more information, such as the ld(1) and ld.so(8) manual pages.</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> /usr/bin/mkdir -p <span class="string">'/usr/local/include'</span></span><br><span class="line"> /usr/bin/install -c -m 644 ev.h ev++.h event.h <span class="string">'/usr/local/include'</span></span><br><span class="line"> /usr/bin/mkdir -p <span class="string">'/usr/local/share/man/man3'</span></span><br><span class="line"> /usr/bin/install -c -m 644 ev.3 <span class="string">'/usr/local/share/man/man3'</span></span><br><span class="line">make[1]: Leaving directory <span class="string">'/root/build/libev-4.33'</span></span><br><span class="line">root@iZbp18k2vy63cz9njzffe8Z:~/build/libev-4.33<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<p>  注意: 上述编译期间如无报错, 那么最终头文件与库文件都将会被安装的<code>/usr/local</code>的相关目录下.</p>
<h2 id="测试运行"><a href="#测试运行" class="headerlink" title="测试运行"></a>测试运行</h2><p>  为了检查我们是否正常安装好, 可以就地编写一个简单的<code>demo</code>来进行测试:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ev.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> ev_idle idle;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">idle_cb</span><span class="params">(struct ev_loop* loop, ev_idle *idle, <span class="keyword">int</span> revents)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">puts</span>(<span class="string">"idle start."</span>);</span><br><span class="line">  ev_idle_stop(loop, idle);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">ev_loop</span>* <span class="title">loop</span> = <span class="title">EV_DEFAULT</span>;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 注册一个空闲事件.</span></span><br><span class="line">  ev_idle_init(&amp;idle, idle_cb);</span><br><span class="line">  ev_idle_start(loop, &amp;idle);</span><br><span class="line"></span><br><span class="line">  ev_run(loop, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  上述示例注册空闲(<code>idle</code>)事件后进入到事件循环内部, 空闲(<code>idle</code>)事件回调打印输出后立刻调用方法停止.</p>
<p>  由于<code>loop</code>内部再未注册任何其它事件, 所以<code>ev_run</code>将在停止后返回并且整个进程正常退出. </p>
<p>  代码完成之后我们手动指定头文件与库文件的路径然后编译运行:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp18k2vy63cz9njzffe8Z:~/build<span class="comment"># cc -o main main.c  -L/usr/local/lib -I/usr/local/include/ -lev -Wl,-rpath,/usr/local/lib</span></span><br><span class="line">root@iZbp18k2vy63cz9njzffe8Z:~/build<span class="comment"># ./main</span></span><br><span class="line">idle start.</span><br><span class="line">root@iZbp18k2vy63cz9njzffe8Z:~/build<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<p>  可以看到程序执行成功, <code>Libev</code>已经本成功安装好了.</p>

        <div id="react-support-footer-root"></div>
      </div>
    </div>
  </div>
</div>

    


    

    <!-- js vendors -->
    <script src="//code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lunr.js/2.1.0/lunr.min.js"></script>

    <!-- js source  -->
    <script src="/script/doc.js"></script>

    

  </body>
</html>
